---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import PageHeader from "../components/ui/PageHeader.astro";
import BlogPostCard from "../components/blog/BlogPostCard.astro";

const pageTitle = "Blog";
const allPosts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout pageTitle={pageTitle}>
  <div class="max-w-6xl mx-auto">
    <PageHeader
      title="Blog"
      subtitle="A place for my notes, experiments, and thoughts on coding, music, and games."
    />

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {allPosts.map((post) => <BlogPostCard {post} />)}
    </div>
  </div>
</Layout>
